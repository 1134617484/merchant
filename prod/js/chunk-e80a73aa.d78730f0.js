(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e80a73aa"],{"01f5":function(t,e,i){var a=i("648a");t.exports=function(t,e,i){if(a(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,a){return t.call(e,i,a)};case 3:return function(i,a,o){return t.call(e,i,a,o)}}return function(){return t.apply(e,arguments)}}},"119c":function(t,e,i){"use strict";var a=i("b6f1");t.exports=function(t,e){return!!t&&a(function(){e?t.call(null,function(){},1):t.call(null)})}},"2a5f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"bor"},[i("div",[i("el-button",{staticClass:"myAdd_btn fl",attrs:{type:"success"},on:{click:t.addAdminUser}},[t._v("添加权限")])],1),i("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{prop:"id",label:"#"}}),i("el-table-column",{attrs:{prop:"title",label:"权限名称"}}),i("el-table-column",{attrs:{prop:"menu_name",label:"路由"}}),i("el-table-column",{attrs:{prop:"icon",label:"图标"}}),i("el-table-column",{attrs:{label:"主菜单菜单状态",prop:"is_menu"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-color":"#67c23a","inactive-color":"#dcdfe6"},on:{change:function(i){return t.handleIsMenu(e.$index,e.row)}},model:{value:e.row.is_menu,callback:function(i){t.$set(e.row,"is_menu",i)},expression:"scope.row.is_menu"}})]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),i("el-button",{staticClass:"myDeleteColor",attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),i("el-pagination",{attrs:{"current-page":+t.currentPage,background:"","page-sizes":[20,50,100,200],"page-size":+t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:+t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),i("el-dialog",{staticClass:"text-left addClass",attrs:{title:"编辑信息",width:"490px",visible:t.outerVisible},on:{"update:visible":function(e){t.outerVisible=e}}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.rules}},[i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"上级菜单: ","label-width":t.formLabelWidth,prop:"pid"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.selectTitle,callback:function(e){t.selectTitle="string"===typeof e?e.trim():e},expression:"selectTitle"}},t._l(t.options,function(t,e){return i("el-option",{key:e,attrs:{label:t.title,value:t.title}})}),1)],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"权限名称 : ","label-width":t.formLabelWidth,prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入权限名称",autocomplete:"off"},model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title","string"===typeof e?e.trim():e)},expression:"editForm.title"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"图标: ","label-width":t.formLabelWidth,prop:"icon"}},[i("el-input",{attrs:{placeholder:"请输入图标地址",autocomplete:"off"},model:{value:t.editForm.icon,callback:function(e){t.$set(t.editForm,"icon","string"===typeof e?e.trim():e)},expression:"editForm.icon"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"权限标识: ","label-width":t.formLabelWidth,prop:"pid"}},[i("el-input",{attrs:{placeholder:"请输入权限标识",autocomplete:"off"},model:{value:t.editForm.menu_name,callback:function(e){t.$set(t.editForm,"menu_name","string"===typeof e?e.trim():e)},expression:"editForm.menu_name"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"主菜单: ","label-width":t.formLabelWidth,prop:"is_menu"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.editForm.is_menu,callback:function(e){t.$set(t.editForm,"is_menu",e)},expression:"editForm.is_menu"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"是否验证: ","label-width":t.formLabelWidth,prop:"status"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"排序: ","label-width":t.formLabelWidth,prop:"sort"}},[i("el-input",{attrs:{placeholder:"请输入排序",autocomplete:"off"},model:{value:t.editForm.sort,callback:function(e){t.$set(t.editForm,"sort","string"===typeof e?e.trim():e)},expression:"editForm.sort"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"mybtAdd",on:{click:function(e){t.outerVisible=!1}}},[t._v("取 消")]),i("el-button",{staticClass:"mybtAdd",attrs:{type:"primary"},on:{click:function(e){return t.isUpdate("editForm")}}},[t._v("修 改")])],1)],1),i("el-dialog",{staticClass:"text-left addClass",attrs:{title:"添加信息",width:"490px",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules}},[i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"上级菜单: ","label-width":t.formLabelWidth,prop:"pid"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.selectTitle,callback:function(e){t.selectTitle="string"===typeof e?e.trim():e},expression:"selectTitle"}},t._l(t.options,function(t,e){return i("el-option",{key:e,attrs:{label:t.title,value:t.title}})}),1)],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"权限名称 : ","label-width":t.formLabelWidth,prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入权限名称",autocomplete:"off"},model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title","string"===typeof e?e.trim():e)},expression:"addForm.title"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"图标: ","label-width":t.formLabelWidth,prop:"icon"}},[i("el-input",{attrs:{placeholder:"请输入图标地址",autocomplete:"off"},model:{value:t.addForm.icon,callback:function(e){t.$set(t.addForm,"icon","string"===typeof e?e.trim():e)},expression:"addForm.icon"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"权限标识: ","label-width":t.formLabelWidth,prop:"pid"}},[i("el-input",{attrs:{placeholder:"请输入权限标识",autocomplete:"off"},model:{value:t.addForm.menu_name,callback:function(e){t.$set(t.addForm,"menu_name","string"===typeof e?e.trim():e)},expression:"addForm.menu_name"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"主菜单: ","label-width":t.formLabelWidth,prop:"is_menu"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.addForm.is_menu,callback:function(e){t.$set(t.addForm,"is_menu",e)},expression:"addForm.is_menu"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"是否验证: ","label-width":t.formLabelWidth,prop:"status"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}})],1),i("el-form-item",{staticClass:"my_form_inp",attrs:{label:"排序: ","label-width":t.formLabelWidth,prop:"sort"}},[i("el-input",{attrs:{placeholder:"请输入排序",autocomplete:"off"},model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort","string"===typeof e?e.trim():e)},expression:"addForm.sort"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"mybtAdd",on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{staticClass:"mybtAdd",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("addForm")}}},[t._v("保 存")])],1)],1)],1)])},o=[],r=(i("b745"),i("49a5"),i("365c")),n={name:"AccessConfig",data:function(){return{selectTitle:"",options:[],addForm:{id:"",menu_name:"",icon:"",pid:0,title:"",is_menu:!0,status:!0,sort:""},editForm:{id:"",menu_name:"",icon:"",pid:0,title:"",is_menu:!0,status:!0,sort:""},editId:"",rules:{pid:[{required:!0,message:"请输入上级菜单",trigger:"change"}],title:[{required:!0,message:"请输入权限名称",trigger:"change"}],icon:[{required:!0,message:"请输入图标",trigger:"change"}],sort:[{required:!0,validator:this.$rules.FormValidate.Form().validateNumber,trigger:"change"}],menu_name:[{required:!0,message:"请输入权限标识",trigger:"change"}]},currentPage:"",total:"",pageSize:10,tableData:[],outerVisible:!1,innerVisible:!1,dialogFormVisible:!1,formLabelWidth:"100px"}},created:function(){this.getTableData(),this.getSelectMenuData()},methods:{getSelectMenuData:function(){var t=this,e={pid:0};Object(r["b"])("api/permission/select",e).then(function(e){t.options=e.data.data,t.selectTitle=t.options[0].title})},getTableData:function(){var t=this;Object(r["b"])("api/permission").then(function(e){var i=e.data.data.data,a=e.data.data;if(t.currentPage=a.current_page,t.total=a.total,t.pageSize=a.per_page,i.length>0){for(var o=[],r=0;r<i.length;r++)o.push({id:i[r].id,icon:i[r].icon,menu_name:i[r].menu_name,title:i[r].title,status:!!i[r].status,is_menu:!!i[r].is_menu,pid:i[r].pid,sort:i[r].sort});t.tableData=o}})},formatter:function(t,e){return t.address},handleRole:function(t,e){this.$router.push({path:"/assignRoleList",query:{id:e.id}})},handleIsMenu:function(t,e){var i=this;Object(r["b"])("api/permission/switch/"+e.id).then(function(t){i.getTableData(),i.$message({message:"状态修改成功",type:"success"})})},handleStatus:function(t,e){var i=this;Object(r["b"])("api/permission/toggle/"+e.id).then(function(t){i.getTableData(),i.$message({message:"状态修改成功",type:"success"})})},handleEdit:function(t,e){this.selectTitle=e.title,this.editId=e.pid,this.editForm.title=e.title,this.editForm.icon=e.icon,this.editForm.sort=e.sort,this.editForm.menu_name=e.menu_name,this.editForm.status=e.status,this.editForm.id=e.id,this.outerVisible=!0},handleDelete:function(t,e){var i=this;this.$confirm("确定删除 ".concat(e.title," 吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r["a"])("api/permission/"+e.id).then(function(t){i.getTableData(),i.$message({message:"删除成功",type:"success"})}).catch(function(t){i.$message({message:"删除失败",type:"error"})})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},isUpdate:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.editForm.is_menu?e.editForm.is_menu=1:e.editForm.is_menu=0,e.editForm.status?e.editForm.status=1:e.editForm.status=0;var i=e.options.filter(function(t){return t.title==e.selectTitle});i.length>0?e.editForm.pid=i[0].pid:e.editForm.pid=e.editId;var a={pid:e.editForm.pid,is_menu:e.editForm.is_menu,title:e.editForm.title,status:e.editForm.status,icon:e.editForm.icon,menu_name:e.editForm.menu_name,sort:e.editForm.sort};e.$confirm("确定修改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r["d"])("api/permission/"+e.editForm.id,a).then(function(t){e.getTableData(),e.$message({message:"编辑成功",type:"success"})}).catch(function(t){e.$message({message:"编辑失败",type:"error"})}),e.outerVisible=!1}).catch(function(){e.$message({type:"info",message:"已取消修改"}),e.outerVisible=!1})})},handleSizeChange:function(t){var e=this,i={per_page:t};Object(r["b"])("api/permission",i).then(function(t){var i=t.data.data.data,a=t.data.data;if(e.currentPage=a.current_page,e.total=a.total,e.pageSize=a.per_page,i.length>0){for(var o=[],r=0;r<i.length;r++)o.push({id:i[r].id,icon:i[r].icon,menu_name:i[r].menu_name,title:i[r].title,status:!!i[r].status,is_menu:!!i[r].is_menu,pid:i[r].pid,sort:i[r].sort});e.tableData=o}})},handleCurrentChange:function(t){var e=this,i={page:t};Object(r["b"])("api/permission",i).then(function(t){var i=t.data.data.data,a=t.data.data;if(e.currentPage=a.current_page,e.total=a.total,e.pageSize=a.per_page,i.length>0){for(var o=[],r=0;r<i.length;r++)o.push({id:i[r].id,icon:i[r].icon,menu_name:i[r].menu_name,title:i[r].title,status:!!i[r].status,is_menu:!!i[r].is_menu,pid:i[r].pid,sort:i[r].sort});e.tableData=o}})},addAdminUser:function(){this.dialogFormVisible=!0},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var i,a,o=e.options.filter(function(t){return t.title==e.selectTitle});e.addForm.pid=o[0].pid,i=e.addForm.is_menu?1:0,a=e.addForm.status?1:0;var n={pid:e.addForm.pid,is_menu:i,title:e.addForm.title,status:a,icon:e.addForm.icon,menu_name:e.addForm.menu_name,sort:e.addForm.sort};Object(r["c"])("api/permission",n).then(function(t){e.getTableData(),e.$message({message:"添加成功",type:"success"}),e.dialogFormVisible=!1}).catch(function(t){e.$message({message:"添加失败",type:"error"})})})}}},s=n,l=(i("d093"),i("2877")),c=Object(l["a"])(s,a,o,!1,null,"1bd8023d",null);e["default"]=c.exports},"2e4f":function(t,e,i){},"648a":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},b2f5:function(t,e,i){var a=i("3754"),o=i("a4cc"),r=i("743d"),n=i("e5ef"),s=i("01f5"),l="prototype",c=function(t,e,i){var m,d,u,p,f=t&c.F,b=t&c.G,h=t&c.S,g=t&c.P,_=t&c.B,F=b?a:h?a[e]||(a[e]={}):(a[e]||{})[l],v=b?o:o[e]||(o[e]={}),y=v[l]||(v[l]={});for(m in b&&(i=e),i)d=!f&&F&&void 0!==F[m],u=(d?F:i)[m],p=_&&d?s(u,a):g&&"function"==typeof u?s(Function.call,u):u,F&&n(F,m,u,t&c.U),v[m]!=u&&r(v,m,p),g&&y[m]!=u&&(y[m]=u)};a.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},b745:function(t,e,i){"use strict";var a=i("b2f5"),o=i("648a"),r=i("db4b"),n=i("b6f1"),s=[].sort,l=[1,2,3];a(a.P+a.F*(n(function(){l.sort(void 0)})||!n(function(){l.sort(null)})||!i("119c")(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),o(t))}})},d093:function(t,e,i){"use strict";var a=i("2e4f"),o=i.n(a);o.a},db4b:function(t,e,i){var a=i("f01a");t.exports=function(t){return Object(a(t))}},f01a:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}}}]);
//# sourceMappingURL=chunk-e80a73aa.d78730f0.js.map