(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a3ebeac"],{"42d8":function(e,t,a){},5454:function(e,t,a){},"7bc1":function(e,t,a){"use strict";var l=a("22e9"),n=a("a013"),i=a("0d5f"),r=a("b0f4"),o=a("b146"),c=a("35dd"),s=a("1f98"),m=a("b6f1"),p=Math.min,u=[].push,d="split",h="length",f="lastIndex",g=4294967295,b=!m((function(){RegExp(g,"y")}));a("629c")("split",2,(function(e,t,a,m){var _;return _="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!l(e))return a.call(n,e,t);var i,r,o,c=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,d=void 0===t?g:t>>>0,b=new RegExp(e.source,m+"g");while(i=s.call(b,n)){if(r=b[f],r>p&&(c.push(n.slice(p,i.index)),i[h]>1&&i.index<n[h]&&u.apply(c,i.slice(1)),o=i[0][h],p=r,c[h]>=d))break;b[f]===i.index&&b[f]++}return p===n[h]?!o&&b.test("")||c.push(""):c.push(n.slice(p)),c[h]>d?c.slice(0,d):c}:"0"[d](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,l){var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,l):_.call(String(n),a,l)},function(e,t){var l=m(_,e,this,t,_!==a);if(l.done)return l.value;var s=n(e),u=String(this),d=i(s,RegExp),h=s.unicode,f=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(b?"y":"g"),v=new d(b?s:"^(?:"+s.source+")",f),y=void 0===t?g:t>>>0;if(0===y)return[];if(0===u.length)return null===c(v,u)?[u]:[];var F=0,k=0,C=[];while(k<u.length){v.lastIndex=b?k:0;var x,S=c(v,b?u:u.slice(k));if(null===S||(x=p(o(v.lastIndex+(b?0:k)),u.length))===F)k=r(u,k,h);else{if(C.push(u.slice(F,k)),C.length===y)return C;for(var w=1;w<=S.length-1;w++)if(C.push(S[w]),C.length===y)return C;k=F=x}}return C.push(u.slice(F)),C}]}))},8396:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"bor"},[a("div",{staticClass:"grid-content bg-purple el-main fl clearfix account-head"},[a("label",[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"投诉开始日期","value-format":"yyyy-MM-dd","range-separator":"至","end-placeholder":"投诉结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("el-button",{staticClass:"mySearch_btn fr",attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1),a("div",[a("el-button",{staticClass:"myAdd_btn fl",attrs:{type:"success"},on:{click:e.handleAuthorized}},[e._v("投诉")])],1),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"complain_merchant",label:"投诉商户/订单"}}),a("el-table-column",{attrs:{prop:"complain_type",label:"投诉类型"}}),a("el-table-column",{attrs:{prop:"complain_remark",label:"投诉内容"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间 "}})],1),a("el-pagination",{attrs:{"current-page":+e.currentPage,background:"","page-sizes":[20,50,100,200],"page-size":+e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:+e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"text-left addClass",attrs:{title:"商户投诉",width:"30%",visible:e.dialogFormComplain},on:{"update:visible":function(t){e.dialogFormComplain=t}}},[a("el-form",{ref:"Form",attrs:{model:e.Form,rules:e.Rules}},[a("el-form-item",{staticClass:"my_form_inp",attrs:{label:"投诉类型: ","label-width":e.formLabelWidth,prop:"complain_type"}},[a("el-select",{attrs:{placeholder:"请选择投诉类型",filterable:""},on:{change:e.el_select},model:{value:e.Form.complain_type,callback:function(t){e.$set(e.Form,"complain_type",t)},expression:"Form.complain_type"}},e._l(e.complainOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.Form.complain_type?a("el-form-item",{staticClass:"my_form_inp",attrs:{label:"商户号: ","label-width":e.formLabelWidth,prop:"complain"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.Form.complain,callback:function(t){e.$set(e.Form,"complain","string"===typeof t?t.trim():t)},expression:"Form.complain"}})],1):e._e(),2==e.Form.complain_type?a("el-form-item",{staticClass:"my_form_inp",attrs:{label:"订单号: ","label-width":e.formLabelWidth,prop:"complain"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.Form.complain,callback:function(t){e.$set(e.Form,"complain","string"===typeof t?t.trim():t)},expression:"Form.complain"}})],1):e._e(),a("el-form-item",{staticClass:"my_form_inp",attrs:{label:"投诉内容: ","label-width":e.formLabelWidth,prop:"complain_remark"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.Form.complain_remark,callback:function(t){e.$set(e.Form,"complain_remark","string"===typeof t?t.trim():t)},expression:"Form.complain_remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"mybtAdd",on:{click:function(t){e.dialogFormComplain=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"mybtAdd",attrs:{type:"primary"},on:{click:function(t){return e.submitFormComplain("Form")}}},[e._v("保 存")])],1)],1)],1)])},n=[],i=(a("7bc1"),a("49a5"),a("365c")),r={name:"AccessConfig",data:function(){return{merchant_id:"",complain_merchant_id:"",complain_order_id:"",optType:"",date:"",typeOptions:[],formLabelWidth:"120px",Form:{complain:"",complain_type:"",complain_remark:""},Rules:{complain:[{required:!0,message:"请输入投诉标识",trigger:"change"},{min:5,max:25,message:"投诉标识长度在5~25字符范围"}],complain_type:[{required:!0,message:"请选择投诉类型",trigger:"change"}],complain_remark:[{required:!0,message:"请输入投诉内容",trigger:"change"},{min:5,max:25,message:"投诉内容长度在5~25字符范围"}]},dialogFormComplain:!1,complainOptions:[{value:"1",label:"投诉商户"},{value:"2",label:"投诉订单"}],currentPage:"",total:"",pageSize:10,page:"",tableData:[]}},created:function(){this.getTableData(),this.getSelectMenuData()},methods:{getSelectMenuData:function(){var e=this;Object(i["b"])("api/merchant/select").then((function(t){e.typeOptions=t.data.data;var a={id:"a",name:"全部"};e.typeOptions.unshift(a)}))},getTableData:function(e){var t=this;Object(i["b"])("merchant/complain",e).then((function(e){var a=e.data.data.data,l=e.data.data;if(t.currentPage=l.current_page,t.total=l.total,t.pageSize=l.per_page,a.length>0){for(var n=[],r=0;r<a.length;r++)n.push({id:a[r].id,complain_type:1==a[r].complain_type?"投诉商户":"投诉订单",complain_merchant:1==a[r].complain_type?a[r].complain_merchant.username:a[r].complain_order?a[r].complain_order.pay_order_id:a[r].complain_order,complain_remark:a[r].complain_remark,status:0==a[r].status?"待审核":"审核通过",created_at:Object(i["k"])(a[r].created_at),merchant:a[r].merchant,complain_order:a[r].complain_order,complain:a[r].complain});t.tableData=n}else t.tableData=[]}))},handleSizeChange:function(e){this.pageSize=e,this.handleSearch()},handleCurrentChange:function(e){this.page=e,this.handleSearch()},handleAuthorized:function(e,t){this.dialogFormComplain=!0},submitFormComplain:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={complain:t.Form.complain,complain_type:t.Form.complain_type,complain_remark:t.Form.complain_remark};Object(i["c"])("merchant/complain",a).then((function(e){t.dialogFormComplain=!1,t.Form.complain="",t.Form.complain_type="",t.Form.complain_remark="",t.handleSearch()})).catch((function(e){t.$message({message:"投诉失败",type:"error"})}))}))},handleSearch:function(){var e=JSON.stringify(this.date),t=e.split(","),a=JSON.parse(t);this.date=a;var l={created_at:this.date,per_page:this.pageSize,page:this.page};this.getTableData(l)},el_select:function(){this.Form.complain=""}}},o=r,c=(a("e78c"),a("a3b9"),a("d2db"),a("6691")),s=Object(c["a"])(o,l,n,!1,null,"6f84c3ce",null);t["default"]=s.exports},a3b9:function(e,t,a){"use strict";var l=a("e3e2"),n=a.n(l);n.a},d2db:function(e,t,a){"use strict";var l=a("5454"),n=a.n(l);n.a},e3e2:function(e,t,a){},e78c:function(e,t,a){"use strict";var l=a("42d8"),n=a.n(l);n.a}}]);
//# sourceMappingURL=chunk-2a3ebeac.83925369.js.map